<!DOCTYPE html>

<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1">
		<meta name="renderer" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="edge">
		<meta http-equiv="Expires" content="0">
		<meta http-equiv="Pragma" content="no-cache">
		<meta http-equiv="Cache-control" content="no-cache, no-store, must-revalidate">
		<meta http-equiv="Cache" content="no-cache">
		<link rel="icon" href="https://jfinal.com/assets/img/favicon.ico">
		<title>JFinal-RunApi</title>
		<meta name="keywords" content="在线API文档 技术文档 开发工具 在线手册">
		<meta name="description" content="一个非常适合IT团队的在线API文档、技术文档工具。JFinal-RunApi是集swagger和postman于一身的接口文档开发工具。">
		#@header()
		<link type="text/css" rel="stylesheet" href="#(path)/assets/css/runapi/doc-index.css">
		<link href="#(path)/assets/css/runapi/doc-app.css" rel="stylesheet">
		<!-- <script src="#(path)/assets/js/runapi/vendor.js" type="text/javascript" ></script> -->
		<style type="text/css">
			.td-max{
				width: 152px;
			}
			.td-max-left{
				width: 150px;
				text-align: left;
			}
			.hide{
				display:none;
			}
			.td-wit-1{
				width:195px;
			}
			.td-wit-2{
				width:261px;
			}
			.left-menu-bottom-bar[data-v-1e6f9205] {
			    height: 50px;
			    position: fixed;
			    bottom: 0;
			    width: 300px;
			    margin-left: -323px;
			    background-color: #fafafa;
			}
			.left-menu-bottom-bar .bottom-bar-item-icon[data-v-1e6f9205] {
			    width: calc(25% - 4px);
			    height: 50px;
			    font-size: 20px;
			    -webkit-box-pack: center;
			    -ms-flex-pack: center;
			    justify-content: center;
			    -webkit-box-align: center;
			    -ms-flex-align: center;
			    align-items: center;
			    display: -webkit-inline-box;
			    display: -ms-inline-flexbox;
			    display: inline-flex;
			    cursor: pointer;
			}
			#left-side-menu[data-v-005611ed] {
			    color: #333;
			    position: fixed;
			    margin-top: -20px;
			    height: calc(100% - 130px)
			}
			.header-project{
				width:250px;
				height:30px;
				margin-left: 20px;
			    margin-bottom: 10px;
			    border-color: #ccc;
			    color: #409eff;
			}
			.json{
				max-height:600px;
			}
		</style>
	</head>
	<body class="grey-bg">
	#define menuItem(menuList,i,keyword)
		#for(data:menuList)
		<li data-v-005611ed="" role="menuitem" aria-haspopup="true" tabindex="#(data.id??)" onclick="opened(#(data.id??))" class="el-submenu" >
			<div class="el-submenu__title" style="padding-left: #(i*20)px; background-color: rgb(250, 250, 250);">
				<i data-v-005611ed="" class="el-icon-folder"></i>
				#(data.title??)（#(data.apiList.size()??0)）
				<i class="el-submenu__icon-arrow el-icon-arrow-down"></i>
			</div>
			#if(data.apiList||data.children)
			<ul role="menu" class="el-menu el-menu--inline #(keyword?? 'layui-hide')" style="background-color: rgb(250, 250, 250); " data-old-padding-top="" data-old-padding-bottom="" data-old-overflow="">  
				#if(data.children)
					#@menuItem(data.children,i+1,keyword)
				#end
				#for(da:data.apiList)
				<li data-v-005611ed="" role="menuitem" tabindex="#(da.id??)" onclick='event.stopPropagation()' class="el-menu-item #if(da.id==api.id??)is-active#end " style="padding-left: #(i*20+20)px; background-color: rgb(250, 250, 250);">
					<i data-v-005611ed="" class="el-icon-document"></i>#(for.count)
					<a data-v-005611ed="" href="#(path)/runapi/doc/#(projectId)-#(da.id??)#if(keyword)?keyword=#(keyword)#end" title="#(da.title??)" id="left_page_#(da.id??)">#(da.title??)</a>
				</li>
				#end
			</ul>				
			#end
			
		</li>
		#end
	#end
		<div id="app">
			<div  class="hello">
				<div data-v-2eba7a07=""  class="hello">
					<div data-v-168051ae="" data-v-2eba7a07=""></div>
					<div data-v-2eba7a07="" id="header" style="">
						
					</div>
					<div data-v-2eba7a07="" id="doc-container" class="md container doc-container">
						<div data-v-2eba7a07="" id="left-side">
							<div data-v-005611ed="" data-v-2eba7a07="" class="hide-scrollbar">
								<i data-v-005611ed="" id="header-left-btn" class="el-icon-menu header-left-btn hide"></i>
								<!---->
								<aside data-v-005611ed="" class="el-aside menu-margin-left2" id="left-side-menu" style="width: 300px;">
									#if(projectId)
									<select class="header-project layui-hide" lay-filter="project">
										#for(data:projectList)
										<option value="#(data.id??)" #if(data.id==projectId) selected="selected"#end>#(data.project_name??)</option>
										#end
									</select>
									#end
									<ul data-v-005611ed="" id="menuList" role="menubar" class="el-menu" style="background-color: rgb(250, 250, 250);">
										<div data-v-005611ed="" class="search-box el-input el-input--small el-input--suffix">
											<input type="text" autocomplete="off" id="keyword" placeholder="输入关键字后按回车以搜索" value="#(keyword)" onkeydown="search(event)" class="el-input__inner">
										</div>
										<i data-v-005611ed="" class="el-tooltip el-icon-s-fold cursor-pointer hide" aria-describedby="el-tooltip-485" tabindex="0"></i>
										#@menuItem(menuList,1,keyword)
										#for(data:apiList)
										<li data-v-005611ed="" role="menuitem" tabindex="#(for.index)" class="el-menu-item #if(data.id==api.id)is-active#end" style="padding-left: 20px; background-color: rgb(250, 250, 250);">
											<i data-v-005611ed="" class="el-icon-document"></i>#(for.count)
											<a data-v-005611ed="" href="#(path)/runapi/doc/#(projectId)-#(data.id)#if(keyword)?keyword=#(keyword)#end" title="#(data.title??)" id="left_page_#(data.id??)">#(data.title??)</a>
										</li>
										#end
									</ul>
								</aside>
							</div>
							<!-- 底部菜单 -->
							<div data-v-1e6f9205="" data-v-380220c1="">
								<div data-v-1e6f9205="" id="left-menu-bottom-bar" class="left-menu-bottom-bar">
									#permission('/runapi/addDoc')
									<div data-v-1e6f9205="" class="bottom-bar-item-icon">
										<i data-v-1e6f9205="" class="el-tooltip el-icon-circle-plus-outline" aria-describedby="el-tooltip-9273" tabindex="0" onclick="menuApi()"></i>
									</div>
									#end
									#permission('/menu')
									#if(projectId)
									<div data-v-1e6f9205="" class="bottom-bar-item-icon"><i data-v-1e6f9205="" class="el-tooltip el-icon-folder-add" aria-describedby="el-tooltip-1479" tabindex="0" onclick="addMenu()"></i></div> 
									#end
									#end
									#permission('/runapi/sort')
									<div data-v-1e6f9205="" class="bottom-bar-item-icon"><i data-v-1e6f9205="" class="el-tooltip el-icon-sort" aria-describedby="el-tooltip-3806" tabindex="0" onclick="sort()"></i></div> 
									#end
									<!-- <div data-v-1e6f9205="" class="bottom-bar-item-icon">
										<div data-v-1e6f9205="" class="el-dropdown">
											<div data-v-1e6f9205="" class="bottom-bar-item-icon el-dropdown-selfdefine " aria-haspopup="list" aria-controls="dropdown-menu-6486" role="button" tabindex="0">
												<span data-v-1e6f9205="" class="el-dropdown-link"><i data-v-1e6f9205="" class="item-icon-more el-icon-more"></i></span>
											</div> 
										</div>
									</div> -->
								</div>
							</div>
						</div>
						<div data-v-2eba7a07="" id="right-side">
							<div data-v-2eba7a07="" id="p-content">
								<div data-v-2eba7a07="" id="doc-title-box" class="doc-title-box">
									<span data-v-2eba7a07="" id="doc-title-span" class="dn"></span>
									<h2 data-v-2eba7a07="" id="doc-title">#(api.title??)</h2>
									<i data-v-2eba7a07="" id="full-page" class="el-icon-full-screen hide"></i>
									<!---->
								</div>
								<div data-v-2eba7a07="" id="doc-body">
								#if(api )
									<div data-v-2eba7a07="" id="page_md_content" class="page_content_main">
										<div data-v-2eba7a07="" id="editor-md" class="main-editor markdown-body editormd-html-preview">
											<!---->
											<div class="markdown-toc editormd-markdown-toc open-list">
												<ul class="markdown-toc-list">
													#if(api.description)
													<li>
														<a class="toc-level-5" href="#(path)/runapi/doc/#(projectId)-#(api.id??)#简要描述" >简要描述</a>
													</li>
													#end
													#if(api.interface_status)
													<li>
														<a class="toc-level-5" href="#(path)/runapi/doc/#(projectId)-#(api.id??)#请求URL" >接口状态</a>
													</li>
													#end
													#if(api.request_url)
													<li>
														<a class="toc-level-5" href="#(path)/runapi/doc/#(projectId)-#(api.id??)#请求URL" >请求URL</a>
													</li>
													#end
													#if(api.request_mode)
													<li>
														<a class="toc-level-5" href="#(path)/runapi/doc/#(projectId)-#(api.id??)#请求方式" >请求方式</a>
													</li>
													#end
													#if(api.headersJson && api.headersJson.size()>0)
													<li>
														<a class="toc-level-5" href="#(path)/runapi/doc/#(projectId)-#(api.id??)#Header" >Header</a>
													</li>
													#end
													#if(api.queryJson && api.queryJson.size()>0)
													<li>
														<a class="toc-level-5" href="#(path)/runapi/doc/#(projectId)-#(api.id??)#请求Query参数" >请求Query参数</a>
													</li>
													#end
													#if(api.formDataJson && api.formDataJson.size()>0 && api.request_body_type!='json')
													<li>
														<a class="toc-level-5" href="#(path)/runapi/doc/#(projectId)-#(api.id??)#请求Body参数" >请求Body参数</a>
													</li>
													#end
													#if(api.request_body && api.request_body_type=='json')
													<li>
														<a class="toc-level-5" href="#(path)/runapi/doc/#(projectId)-#(api.id??)#请求参数示例" >请求参数示例</a>
													</li>
													<li>
														<a class="toc-level-5" href="#(path)/runapi/doc/#(projectId)-#(api.id??)#请求json字段说明" >请求json字段说明</a>
													</li>
													#end
													#if(api.success_demo)
													<li>
														<a class="toc-level-5" href="#(path)/runapi/doc/#(projectId)-#(api.id??)#成功返回示例" >成功返回示例</a>
													</li>
													<li>
														<a class="toc-level-5" href="#(path)/runapi/doc/#(projectId)-#(api.id??)#成功返回示例的参数说明" >成功返回示例的参数说明</a>
													</li>
													#end
													#if(api.failuer_demo)
													<li>
														<a class="toc-level-5" href="#(path)/runapi/doc/#(projectId)-#(api.id??)#失败返回示例" >失败返回示例</a>
													</li>
													<li>
														<a class="toc-level-5" href="#(path)/runapi/doc/#(projectId)-#(api.id??)#失败返回示例的参数说明" >失败返回示例的参数说明</a>
													</li>
													#end
													#if(api.remark)
													<li>
														<a class="toc-level-5" href="#(path)/runapi/doc/#(projectId)-#(api.id??)#备注" >备注</a>
													</li>
													#end
												</ul>
											</div>
											#if(api.description)
											<h5 id="h5-u7B80u8981u63CFu8FF0">
												<a name="简要描述" class="reference-link"></a>
												<span class="header-link octicon octicon-link"></span>简要描述
											</h5>
											<ul>
												<li>#(api.description??)</li>
											</ul>
											#end
											#if(api.interface_status)
											<h5 id="h5-u7B80u8981u63CFu8FF0">
												<a name="简要描述" class="reference-link"></a>
												<span class="header-link octicon octicon-link"></span>接口状态
											</h5>
											<ul>
												<li>#(api.interface_status??)</li>
											</ul>
											#end
											#if(api.request_url)
											<h5 id="h5--url">
												<a name="请求URL" class="reference-link"></a>
												<span class="header-link octicon octicon-link"></span>请求URL
											</h5>
											<ul>
												<li>
													<code>#(api.request_url??)</code>
												</li>
											</ul>
											#end
											#if(api.request_mode)
											<h5 id="h5-u8BF7u6C42u65B9u5F0F">
												<a name="请求方式" class="reference-link"></a>
												<span class="header-link octicon octicon-link"></span>请求方式
											</h5>
											<ul>
												<li>#(api.request_mode??)</li>
											</ul>
											#end
											#if(api.headersJson && api.headersJson.size()>0)
											<h5 id="h5-header">
												<a name="Header" class="reference-link"></a>
												<span class="header-link octicon octicon-link"></span>Header
											</h5>
											<div style="width: 100%;overflow-x: auto;">
												<table>
													<thead>
														<tr>
															<th class="td-max-left">header</th>
															<th class="td-max-left">示例值</th>
															<th class="td-max">必选</th>
															<th class="td-max">类型</th>
															<th class="td-max">说明</th>
														</tr>
													</thead>
													<tbody>
														#for(data:api.headersJson??)
															#if(data.disable==false)
																#continue
															#end
														<tr style="background-color: rgb(255, 255, 255);">
															<td style="text-align:left;">#(data.name??)</td>
															<td style="text-align:left;">#(data.value??)</td>
															<td>#(data.require == '1' ? '是' : '否')</td>
															<td>#(data.type??)</td>
															<td>#(data.remark??)</td>
														</tr>
														#end
													</tbody>
												</table>
											</div>
											#end
											#if(api.queryJson && api.queryJson.size()>0)
											<h5 id="h5-query">
												<a name="请求Query参数" class="reference-link"></a>
												<span class="header-link octicon octicon-link"></span>请求Query参数
											</h5>
											<div style="width: 100%;overflow-x: auto;">
												<table>
													<thead>
														<tr>
															<th class="td-max-left">参数名</th>
															<th class="td-max-left">示例值</th>
															<th class="td-max">必选</th>
															<th class="td-max">类型</th>
															<th class="td-max">说明</th>
														</tr>
													</thead>
													<tbody>
														#for(data:api.queryJson??)
														#if(data.name=='')
															#continue
														#end
														<tr style="background-color: rgb(255, 255, 255);">
															<td style="text-align:left;">#(data.name??)</td>
															<td style="text-align:left;">#(data.value??)</td>
															<td>#(data.require == '1' ? '是' : '否')</td>
															<td>#(data.type??)</td>
															<td>#(data.remark??)</td>
														</tr>
														#end
													</tbody>
												</table>
											</div>
											#end
											#if(api.formDataJson && api.formDataJson.size()>0 && api.request_body_type!='json')
											<h5 id="h5-query">
												<a name="请求Body参数" class="reference-link"></a>
												<span class="header-link octicon octicon-link"></span>请求Body参数
											</h5>
											<div style="width: 100%;overflow-x: auto;">
												<table>
													<thead>
														<tr>
															<th class="td-max-left">参数名</th>
															<th class="td-max-left">示例值</th>
															<th class="td-max">必选</th>
															<th class="td-max">类型</th>
															<th class="td-max">说明</th>
														</tr>
													</thead>
													<tbody>
														#for(data:api.formDataJson??)
															#if(data.disable==false)
																#continue
															#end
														<tr style="background-color: rgb(255, 255, 255);">
															<td style="text-align:left;">#(data.name??)</td>
															<td style="text-align:left;">#(data.value??)</td>
															<td>#(data.require == '1' ? '是' : '否')</td>
															<td>#(data.type??)</td>
															<td>#(data.remark??)</td>
														</tr>
														#end
													</tbody>
												</table>
											</div>
											#end
											#if(api.request_body!='' && api.request_body_type=='json')
											<h5 id="h5-u8BF7u6C42u53C2u6570u793Au4F8B">
												<a name="请求参数示例" class="reference-link"></a>
												<span class="header-link octicon octicon-link"></span>请求参数示例
											</h5>
											<pre><span class="btn-pre-copy" id="copy_body_json" onclick="copy('body_json')">复制</span><code class="hljs json" id="body_json">#(api.request_body)</code></pre>
											<h5 id="h5--json-">
												<a name="请求json字段说明" class="reference-link"></a>
												<span class="header-link octicon octicon-link"></span>请求json字段说明
											</h5>
											<div style="width: 100%;overflow-x: auto;">
												<table>
													<thead>
														<tr>
															<th style="text-align: left; width: 195px;">字段名</th>
															<th style="text-align: left; width: 195px;">必选</th>
															<th style="width: 195px;">类型</th>
															<th style="width: 195px;">说明</th>
														</tr>
													</thead>
													<tbody>
													#for(data:api.bodyJson)
														<tr style="background-color: rgb(255, 255, 255);">
															<td style="text-align:left;">#(data.name??)</td>
															<td style="text-align:left;">#(data.require == '1' ? '是':'否')</td>
															<td>#(data.type??)</td>
															<td>#(data.remark??)</td>
														</tr>
													#end
													</tbody>
												</table>
											</div>
											#end
											#if(api.success_demo)
											<h5 id="h5-success-demo">
												<a name="成功返回示例" class="reference-link"></a>
												<span class="header-link octicon octicon-link"></span>成功返回示例
											</h5>
											<pre><span class="btn-pre-copy" id="copy_success_json" onclick="copy('success_json')">复制</span><code class="hljs json" id="success_json">#(api.success_demo??)</code></pre>
											<h5 id="h5-success-demo-#(api.id??)">
												<a name="成功返回示例的参数说明" class="reference-link"></a>
												<span class="header-link octicon octicon-link"></span>成功返回示例的参数说明
											</h5>
											<div style="width: 100%;overflow-x: auto;">
												<table>
													<thead>
														<tr>
															<th style="text-align: left; width: 261px;">参数名</th>
															<th style="text-align: left; width: 261px;">类型</th>
															<th style="width: 261px;">说明</th>
														</tr>
													</thead>
													<tbody>
														#for(data:api.successDataExplain??)
														<tr style="background-color: rgb(255, 255, 255);">
															<td style="text-align:left;">#(data.name??)</td>
															<td style="text-align:left;">#(data.type??)</td>
															<td>#(data.remark??)</td>
														</tr>
														#end
													</tbody>
												</table>
											</div>
											#end
											#if(api.failuer_demo)
											<h5 id="h5-failuer-demo">
												<a name="失败返回示例" class="reference-link"></a>
												<span class="header-link octicon octicon-link"></span>失败返回示例
											</h5>
											<pre><span class="btn-pre-copy" id="copy_failuer_json" onclick="copy('failuer_json')">复制</span><code class="hljs json"  id="failuer_json">#(api.failuer_demo??)</code></pre>
											<h5 id="h5-failuer-demo-#(api.id??)">
												<a name="失败返回示例的参数说明" class="reference-link"></a>
												<span class="header-link octicon octicon-link"></span>失败返回示例的参数说明
											</h5>
											<div style="width: 100%;overflow-x: auto;">
												<table>
													<thead>
														<tr>
															<th style="text-align: left; width: 261px;">参数名</th>
															<th style="text-align: left; width: 261px;">类型</th>
															<th style="width: 261px;">说明</th>
														</tr>
													</thead>
													<tbody>
														#for(data:api.failuerDataExplain??)
														<tr style="background-color: rgb(255, 255, 255);">
															<td style="text-align:left;">#(data.name??)</td>
															<td style="text-align:left;">#(data.type??)</td>
															<td>#(data.remark??)</td>
														</tr>
														#end
													</tbody>
												</table>
											</div>
											#end
											#if(api.requestRemark)
											<h5 id="h5-u5907u6CE8">
												<a name="备注" class="reference-link"></a>
												<span class="header-link octicon octicon-link"></span>备注
											</h5>
											<p>#(api.requestRemark??)</p>
											#end
										</div>
									</div>									
								#else
									<div data-v-2eba7a07="" class="empty-tips">
									<div data-v-2eba7a07="" class="icon"><i data-v-2eba7a07="" class="el-icon-shopping-cart-2"></i></div> 
									<div data-v-2eba7a07="" class="text">
										<p data-v-2eba7a07="">当前项目接口文档是空的，去写程序调用接口来生成吧。</p> 
						                   
				                    	</div>
						            </div>
                    			#end
								</div>
							</div>
							<div data-v-3ef1cbf4="" data-v-2eba7a07="" class="hello">
								<!---->
								<div data-v-3ef1cbf4="" class="op-bar">
									<!---->
									<span data-v-3ef1cbf4="">
										<!-- <a data-v-3ef1cbf4="" href="#(path)/portal/core/sysPermission/item/index" class="el-tooltip item" aria-describedby="el-tooltip-7122" tabindex="0">
											<i data-v-3ef1cbf4="" class="el-icon-back"></i>
										</a> -->
										<i data-v-3ef1cbf4="" class="el-tooltip el-icon-share item" aria-describedby="el-tooltip-3750" tabindex="0" onclick="share()"></i>
										#permission('/runapi/update')
										#if(api)
										<i data-v-3ef1cbf4="" class="el-tooltip el-icon-edit item" aria-describedby="el-tooltip-4537" tabindex="0" onclick="debug()" ></i>
										#end
										#end
										<a data-v-3ef1cbf4="" href="javascript:download()" class="el-tooltip   item" aria-describedby="el-tooltip-2357" tabindex="0">
											<i data-v-3ef1cbf4="" class="el-icon-download"></i>
										</a>
										###<i data-v-3ef1cbf4="" class="el-tooltip el-icon-info item" aria-describedby="el-tooltip-591" tabindex="0"></i>
									</span>
									<!---->
								</div>
								<div data-v-3ef1cbf4="" class="el-dialog__wrapper" style="z-index: 2061;display:none;background-color: #202020a6;">
									<div role="dialog" aria-modal="true" aria-label="分享页面" class="el-dialog" style="margin-top: 15vh; width: 700px;">
										<div class="el-dialog__header">
											<span class="el-dialog__title">分享页面</span>
											<button type="button" aria-label="Close" class="el-dialog__headerbtn">
												<i class="el-dialog__close el-icon el-icon-close" onclick="ok()"></i>
											</button>
										</div>
										<div class="el-dialog__body">
											<p data-v-3ef1cbf4="">
												项目页面地址 :
												<code data-v-3ef1cbf4="" id="share_url">#(shareUrl??)</code>
												<i data-v-3ef1cbf4="" class="el-icon-document-copy" onclick="copy('share_url')"></i>
											</p>
											#if(project.visitType??==1)
											<p data-v-3ef1cbf4="">
												访问密码 :
												<code data-v-3ef1cbf4="" id="share_password">#(project.password??)</code>
												<i data-v-3ef1cbf4="" class="el-icon-document-copy" onclick="copy('share_password')"></i>
											</p>
											#end
										<div class="el-dialog__footer">
											<span data-v-3ef1cbf4="" class="dialog-footer">
												<button data-v-3ef1cbf4="" onclick="ok()" type="button" class="el-button el-button--primary">
													<span>确定</span>
												</button>
											</span>
										</div>
									</div>
								</div>
								<!---->
								<!---->
								
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<textarea id="copy_value" rows="" cols="" style="left: -200px;position: fixed;"></textarea></div>
	</body>
	#@footer()
	<script src="#(path)/assets/lib/jquery/jquery-2.1.4.min.js" type="text/javascript" ></script>
	<script src="#(path)/assets/lib/layui/layui.js" type="text/javascript" ></script>
	<script src="#(path)/assets/js/common/alert.js" type="text/javascript" ></script>
	<!-- jquery 表格移动需要 -->
	<script src="#(path)/assets/lib/jquery/jquery-migrate-1.2.1.js"></script>
	<script src="#(path)/assets/lib/jquery/jquery-ui.min.js" type="text/javascript" ></script>
	<script type="text/javascript">

	var dataMapCache = {};
	
	$(function(){
	    //moveTableTr('menuList','li');
	    var map=sessionStorage.getItem("projectMenuMap");
	    if(map){
	    	dataMapCache=JSON.parse(map);
	    	for(var key in dataMapCache){		    	
	    		var id=key;
	    		if(dataMapCache[key]=='show'){
	    			$("li[tabindex="+id+"]").addClass("is-opened"); 			
    				$("li[tabindex="+id+"]").children('ul').removeClass("layui-hide");
    				$("li[tabindex="+id+"]").children('li').removeClass("layui-hide");
	    		}
	    	}
		 }
	})
	
	layui.form.on('select(project)',function(data){alert(data.value)
		var protocol=window.location.protocol;
		var host=window.location.host;
		var location=protocol+"//"+host;
		var url=location+"/runapi/doc/"+data.value;
		window.location.href="/runapi/doc/"+data.value;
	});
	
		function share(){
			var url="#(path)/share";
			//openDialog('分享列表',url,false,null,null,null)
			$('.el-dialog__wrapper').show();
		}
		function ok(){
			$('.el-dialog__wrapper').hide();
		}

		//复制代码
		function copy(id){
			const codeElement = document.getElementById(id);
			var text=codeElement.innerText;
			const inputElement = document.querySelector('#copy_value');
			inputElement.value=text;
			inputElement.select();
			try{
				document.execCommand('copy');
				layer.msg("复制成功")
			}catch(e){
				layer.msg("复制失败")
			}
		}

		// 搜索
		function search(e){
			if(e.keyCode===13){
				var keyword=$("#keyword").val();
				var url='#(path)/runapi/doc';
				var projectId="#(projectId)";
				
				if(projectId){
					url+='/'+projectId;
					if(keyword)
						url+='?keyword='+keyword;
				}else if(keyword){
					url+="?keyword="+keyword;
				}
				window.location.href=url;
			  }
		}

		//下载文档，可以搜索下载，默认下载全部
		function download(){
			var keyword=$("#keyword").val();
			var url='#(path)/runapi/download?projectId=#(projectId)';
			if(keyword)
				url+='&keyword='+encodeURIComponent(keyword);
			window.location.href=url;
		}

		$(".header-project").change(function() {
			var selected=$(this).children('option:selected').val();
			window.location.href="/runapi/doc/"+selected;
		});
		
		$('.el-icon-download').hover(function(){
	        var index;
	        var title="导出文档，支持搜索导出单个文档";
	        this.index=layer.tips(title, this,{
	            tips:1,
	        });
	    },function(){
	        layer.close(this.index);
	    });
	    
	    $('.el-icon-info').hover(function(){
	        var index;
	        var title="由JFinal-RunApi倾情打造";
	        this.index=layer.tips(title, this,{
	            tips:1,
	        });
	    },function(){
	        layer.close(this.index);
	    });
	    
	    $('.el-icon-share').hover(function(){
	        var index;
	        var title="分享";
	        this.index=layer.tips(title, this,{
	            tips:1,
	        });
	    },function(){
	        layer.close(this.index);
	    });
	    
	    $('.el-icon-edit').hover(function(){
	        var index;
	        var title="编辑调试";
	        this.index=layer.tips(title, this,{
	            tips:1,
	        });
	    },function(){
	        layer.close(this.index);
	    });
	    
	    $('.el-icon-circle-plus-outline').hover(function(){
	        var index;
	        var title="新建接口文档";
	        this.index=layer.tips(title, this,{
	            tips:1,
	        });
	    },function(){
	        layer.close(this.index);
	    });
	    $('.el-icon-folder-add').hover(function(){
	        var index;
	        var title="新建/管理目录";
	        this.index=layer.tips(title, this,{
	            tips:1,
	        });
	    },function(){
	        layer.close(this.index);
	    });

	    $('.el-icon-sort').hover(function(){
	        var index;
	        var title="排序/移动";
	        this.index=layer.tips(title, this,{
	            tips:1,
	        });
	    },function(){
	        layer.close(this.index);
	    });
	    
	var currentLayer;
    function sort(){
        var url="#(path)/runapi/sort?isTitleFilter=true";
        var projectId="#(projectId)";
        if(projectId){
            url+="&projectId="+projectId;
        }
        	currentLayer=openDialog("排序/移动",url,false,900,null,{
				end:function(){
					location.reload();
				},
				resize:false
			},false);
    }

    function debug(){
    	var url="#(path)/runapi/debug/#(api.id??)";
		openDialog("#(api.title??)【调试】",url,false,null,null,{
			end:function(){
				location.reload();
			},
			resize:false
		},false);
    }

    function addMenu(){
        var url="#(path)/menu?objectId=#(projectId)";
		openDialog("添加目录",url,false,700,660,{
			end:function(){
				location.reload();
			},
			resize:false
		},false);
    }

    function menuApi(){
    	 var url="#(path)/runapi/add?projectId=#(projectId)";
 		openDialog("新建接口文档",url,false,750,500,{
 			end:function(){
 				location.reload();
 			}
 		},false);
    }

    function closeLayer(){
		layer.close(currentLayer);
    }


	//鼠标拖拉tr上下移动
    function moveTableTr(docId,item) {
        $("#"+docId).sortable({
            cursor: "move",
            items: item,//只是tr可以拖动
            opacity: 0.6,//拖动时，透明度为0.6
            revert: false,//释放时，增加动画
            start: function(event, ui) {//开始移动
                let str = event.srcElement.innerHTML;//鼠标点击移动时获取的html内容
            },
            update: function(event, ui) {//移动之后更新排序之后
                let str = event.srcElement.innerHTML;
            }
        });
        $("#"+docId).disableSelection();
    }
	
    
	// 目录点击事件
    function opened(id){
		 event.stopPropagation();
		if(dataMapCache[id]=='show'){
			$("li[tabindex="+id+"]").children('ul').addClass("layui-hide");
			$("li[tabindex="+id+"]").children('li').addClass("layui-hide");
			$("li[tabindex="+id+"]").removeClass("is-opened");
			dataMapCache[id]='hide';
		}else{				
			$("li[tabindex="+id+"]").addClass("is-opened"); 			
			$("li[tabindex="+id+"]").children('ul').removeClass("layui-hide");
			$("li[tabindex="+id+"]").children('li').removeClass("layui-hide");
			dataMapCache[id]='show';
		}
		sessionStorage.setItem("projectMenuMap",JSON.stringify(dataMapCache));	
   }
	</script>
</html>